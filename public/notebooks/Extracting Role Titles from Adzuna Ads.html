<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>skeptric – extracting-role-titles-from-adzuna-ads</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">skeptric</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/EdwardJRoss"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="extracting-role-titles" class="level1">
<h1>Extracting Role Titles</h1>
<p>Our goal is to extract role information from job ads to try to understand the job ads better. This is a pretty complex task: role titles are hidden in the text, and can be very ambiguous (“Manager”) or very specific (“Subsea Cabling Engineer”). This notebook scopes out the problem and looks at extracting common examples of role titles.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> PosixPath</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-in-the-data" class="level1">
<h1>Load in the Data</h1>
<p>Get the data from <a href="https://www.kaggle.com/c/job-salary-prediction">Adzunda Job Salary Prediction Kaggle Competition</a>, put it in the data subfolder and unzip all the files.</p>
<p>You can do this manually, or use the <a href="https://github.com/Kaggle/kaggle-api">Kaggle API</a> (once you’ve installed the API, downloaded your <code>kaggle.json</code> file and agreed to the competition rules)</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for split, ext in [('Test', 'zip'), ('Train', 'zip'), ('Valid', 'csv')]:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     !kaggle competitions download -c job-salary-prediction --path data/ -f {split}_rev1.{ext}</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># !find data/ -name '*.zip' -execdir unzip '{}' ';'</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># !find data/ -name '*.zip' -exec rm '{}' ';'</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># !ls data/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dfs <span class="op">=</span> []</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> split <span class="kw">in</span> [<span class="st">'Train'</span>, <span class="st">'Valid'</span>, <span class="st">'Test'</span>]:</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    dfs.append(pd.read_csv(<span class="ss">f'data/</span><span class="sc">{</span>split<span class="sc">}</span><span class="ss">_rev1.csv'</span>).assign(split<span class="op">=</span>split))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat(dfs, sort<span class="op">=</span><span class="va">False</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Title'</span>] <span class="op">=</span> df[<span class="st">'Title'</span>].fillna(<span class="st">''</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> dfs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 6.52 s, sys: 3.06 s, total: 9.58 s
Wall time: 12.6 s</code></pre>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>407894</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_columns <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_colwidth <span class="op">=</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are a bunch of different information in the role titles:</p>
<ul>
<li>Roles: “Engineering Systems Analyst”, “Stress engineer”, “Subsea cables engineer”</li>
<li>Location like “Glasgow” or “East Midlands”</li>
<li>Seniority like “Senior”, “Principal”, “Lead”, or “Trainee”</li>
<li>Industry: Like “Pharmaceutical”, “Construction”,</li>
<li>Selling points/working conditions of the job: “Award Winning Restaurant”, “Excellent Tips”, “Self Employed”, “does it get any better than this?”</li>
<li>Company names: “Nevill Crest and Gun”, “The Refectory”</li>
</ul>
<p>Sometimes there are multiple roles (often multiple descriptions of the same role):</p>
<ul>
<li>Engineering Systems Analyst / Mathematical Modeller</li>
<li>Electrical / ICA Engineer</li>
</ul>
<p>Sometimes it’s ambiguous: is “Modelling and simulation analyst” one role or two (“modelling analyst” and “simulation analyst”?); similarly with “C/C++ developer”. Is “Bilinguial Reservationist” a role title, or is it just “Reservationaist” and “Bilingual” is a skill required for the job?</p>
<p>To understand the job we’ll also need to understand some of the acronyms like:</p>
<ul>
<li>MICE Sales: Meetings, incentives, conferences and exhibitions</li>
<li>ICA Engineer: Instrumentation Control and Automation</li>
</ul>
<div class="cell" data-scrolled="true" data-execution_count="20">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df.Title.head(<span class="dv">50</span>).reset_index()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>index</th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Engineering Systems Analyst</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Stress Engineer Glasgow</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Modelling and simulation analyst</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>Engineering Systems Analyst / Mathematical Modeller</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Pioneer, Miser Engineering Systems Analyst</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>Engineering Systems Analyst Water Industry</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>Senior Subsea Pipeline Integrity Engineer</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>RECRUITMENT CONSULTANT  INDUSTRIAL / COMMERCIAL / ENGINEERING / DRIV</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>RECRUITMENT CONSULTANT  CONSTRUCTION / TECHNICAL / TRADES LABOUR</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9</td>
      <td>Subsea Cables Engineer</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10</td>
      <td>Trainee Mortgage Advisor  East Midlands</td>
    </tr>
    <tr>
      <th>11</th>
      <td>11</td>
      <td>PROJECT ENGINEER, PHARMACEUTICAL</td>
    </tr>
    <tr>
      <th>12</th>
      <td>12</td>
      <td>Principal Composite Stress Engineer</td>
    </tr>
    <tr>
      <th>13</th>
      <td>13</td>
      <td>Senior Fatigue Damage Tolerance Engineer</td>
    </tr>
    <tr>
      <th>14</th>
      <td>14</td>
      <td>Chef de Partie  Award Winning Restaurant  Excellent Tips</td>
    </tr>
    <tr>
      <th>15</th>
      <td>15</td>
      <td>Quality Engineer</td>
    </tr>
    <tr>
      <th>16</th>
      <td>16</td>
      <td>Principal Controls Engineer</td>
    </tr>
    <tr>
      <th>17</th>
      <td>17</td>
      <td>Chef de Partie  Award Winning Dining  Live In  Share of Tips</td>
    </tr>
    <tr>
      <th>18</th>
      <td>18</td>
      <td>Senior Fatigue and Damage Tolerance Engineer</td>
    </tr>
    <tr>
      <th>19</th>
      <td>19</td>
      <td>C I Design Engineer</td>
    </tr>
    <tr>
      <th>20</th>
      <td>20</td>
      <td>Lead Engineers (Stress)</td>
    </tr>
    <tr>
      <th>21</th>
      <td>21</td>
      <td>Relief Chef de Partie  Croydon, Surrey  Live in</td>
    </tr>
    <tr>
      <th>22</th>
      <td>22</td>
      <td>Senior Control and Instrumentation Engineer</td>
    </tr>
    <tr>
      <th>23</th>
      <td>23</td>
      <td>Control and Instrumentation Engineer</td>
    </tr>
    <tr>
      <th>24</th>
      <td>24</td>
      <td>Electrical / ICA Engineer</td>
    </tr>
    <tr>
      <th>25</th>
      <td>25</td>
      <td>Pastry Chef for **** red star **** rosette hotel  ****</td>
    </tr>
    <tr>
      <th>26</th>
      <td>26</td>
      <td>Senior Process Engineer</td>
    </tr>
    <tr>
      <th>27</th>
      <td>27</td>
      <td>CHEF DE PARTIE POSITION IN **** ROSETTE HOTEL NYORKS  ****k</td>
    </tr>
    <tr>
      <th>28</th>
      <td>28</td>
      <td>Senior Sous Chef for **** rosette kitchen, up to ****</td>
    </tr>
    <tr>
      <th>29</th>
      <td>29</td>
      <td>General Manager  Funky, Cool Restaurant Concept  London  ****k</td>
    </tr>
    <tr>
      <th>30</th>
      <td>30</td>
      <td>MICE Sales and Marketing Manager</td>
    </tr>
    <tr>
      <th>31</th>
      <td>31</td>
      <td>C/C++ Developer</td>
    </tr>
    <tr>
      <th>32</th>
      <td>32</td>
      <td>Senior PHP Developer</td>
    </tr>
    <tr>
      <th>33</th>
      <td>33</td>
      <td>Senior Website Designer</td>
    </tr>
    <tr>
      <th>34</th>
      <td>34</td>
      <td>Business Development Manager</td>
    </tr>
    <tr>
      <th>35</th>
      <td>35</td>
      <td>Welwyn Chef de Partie does it get any better than this? ****</td>
    </tr>
    <tr>
      <th>36</th>
      <td>36</td>
      <td>Chef de Partie Sauce Award Winning Hertford ****</td>
    </tr>
    <tr>
      <th>37</th>
      <td>37</td>
      <td>Pastry Chef AL**** ****AA Rosette Restaurant</td>
    </tr>
    <tr>
      <th>38</th>
      <td>38</td>
      <td>QA Engineer</td>
    </tr>
    <tr>
      <th>39</th>
      <td>39</td>
      <td>Documentation Engineer</td>
    </tr>
    <tr>
      <th>40</th>
      <td>40</td>
      <td>Bilingual Customer Service Operator</td>
    </tr>
    <tr>
      <th>41</th>
      <td>41</td>
      <td>Customer Event Coordinator (German speaking)</td>
    </tr>
    <tr>
      <th>42</th>
      <td>42</td>
      <td>Senior Planner</td>
    </tr>
    <tr>
      <th>43</th>
      <td>43</td>
      <td>Bilingual Reservationist (Customer Service)</td>
    </tr>
    <tr>
      <th>44</th>
      <td>44</td>
      <td>Trampoline Coach  Bushey Grove Leisure Centre</td>
    </tr>
    <tr>
      <th>45</th>
      <td>45</td>
      <td>Self Employed Swimming Instructors</td>
    </tr>
    <tr>
      <th>46</th>
      <td>46</td>
      <td>Self Employed Sport Coaches</td>
    </tr>
    <tr>
      <th>47</th>
      <td>47</td>
      <td>Bar/Waiting Staff  The Cricketers, Sarratt</td>
    </tr>
    <tr>
      <th>48</th>
      <td>48</td>
      <td>Deputy Manager  Nevill Crest and Gun, Eridge Green</td>
    </tr>
    <tr>
      <th>49</th>
      <td>49</td>
      <td>Bar/Waiting Staff  The Refectory, Godalming</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Let’s look at the most frequent titles. If different companies use the same title it’s much less likely to have specific job features (like location, company info, or benefit).</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>titles <span class="op">=</span> (</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a> .groupby(<span class="st">'Title'</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a> .agg(companies<span class="op">=</span>(<span class="st">'Company'</span>, <span class="st">'nunique'</span>), jobs<span class="op">=</span>(<span class="st">'Id'</span>, <span class="st">'count'</span>))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a> .sort_values([<span class="st">'companies'</span>, <span class="st">'jobs'</span>], ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(titles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>196165</code></pre>
</div>
</div>
<p>Only 20% of the ad titles occur in more than 1 company</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(titles[<span class="st">'companies'</span>] <span class="op">&gt;</span> <span class="dv">1</span>).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>0.1913440216144572</code></pre>
</div>
</div>
<p>10% of the ad titles occur in 0 companies. This is likely because the title is empty and pandas read it in as NA. This is small enough that we can ignore it for this purpose</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(titles[<span class="st">'companies'</span>] <span class="op">==</span> <span class="dv">0</span>).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>0.10200086661738843</code></pre>
</div>
</div>
<p>Cutting off at 2 there are still some weird things here.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>titles[titles.companies <span class="op">==</span> <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>companies</th>
      <th>jobs</th>
    </tr>
    <tr>
      <th>Title</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Assistant Sales Manager  Market Leading Retailer</th>
      <td>2</td>
      <td>66</td>
    </tr>
    <tr>
      <th>Vehicle Purchaser / Car Sales</th>
      <td>2</td>
      <td>55</td>
    </tr>
    <tr>
      <th>AREA RELIEF OFFICER</th>
      <td>2</td>
      <td>53</td>
    </tr>
    <tr>
      <th>Vehicle Technician  MOT Tester</th>
      <td>2</td>
      <td>42</td>
    </tr>
    <tr>
      <th>Staff Nurse (RGN) Nursing Home</th>
      <td>2</td>
      <td>33</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>warehouse assistant</th>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>warehouse operatives</th>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>web designer</th>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>yEAR ****/4 TEACHER  CARLTON  **** PER DAY</th>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>zSeries Specialist  zSeries UK Wide</th>
      <td>2</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>25416 rows × 2 columns</p>
</div>
</div>
</div>
<p>One reason is the same job can come through two different job boards (<code>SourceName</code>), and they may have different ways of representing the company name or have errors obtaining it.</p>
<p>For example “hyphen” Company sounds like a mistake here.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df[df.Title.<span class="bu">str</span>.startswith(<span class="st">'zS'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Id</th>
      <th>Title</th>
      <th>FullDescription</th>
      <th>LocationRaw</th>
      <th>LocationNormalized</th>
      <th>ContractType</th>
      <th>ContractTime</th>
      <th>Company</th>
      <th>Category</th>
      <th>SalaryRaw</th>
      <th>SalaryNormalized</th>
      <th>SourceName</th>
      <th>split</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>49509</th>
      <td>68626801</td>
      <td>zSeries Specialist  zSeries UK Wide</td>
      <td>zSeries Technical Specialist required for London, My high profile client (leading financial bran...</td>
      <td>London</td>
      <td>London</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Spring Technology</td>
      <td>IT Jobs</td>
      <td>32000.00 - 42000.00 GBP Annual</td>
      <td>37000.0</td>
      <td>jobserve.com</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>63044</th>
      <td>68702465</td>
      <td>zSeries Specialist  zSeries UK Wide</td>
      <td>zSeries Technical Specialist required for London , My high profile client (leading financial bra...</td>
      <td>City London South East</td>
      <td>London</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>hyphen</td>
      <td>IT Jobs</td>
      <td>32000 - 42000 per annum</td>
      <td>37000.0</td>
      <td>totaljobs.com</td>
      <td>Train</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Here the company for the second job is ‘UKStaffsearch’ which is the name of the job board. The job board must replace the title.</p>
<p>Note that one is from the Train set and one from the Test set! This is a data leak.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df[df.Title.<span class="bu">str</span>.startswith(<span class="st">'yEA'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Id</th>
      <th>Title</th>
      <th>FullDescription</th>
      <th>LocationRaw</th>
      <th>LocationNormalized</th>
      <th>ContractType</th>
      <th>ContractTime</th>
      <th>Company</th>
      <th>Category</th>
      <th>SalaryRaw</th>
      <th>SalaryNormalized</th>
      <th>SourceName</th>
      <th>split</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>140597</th>
      <td>70577243</td>
      <td>yEAR ****/4 TEACHER  CARLTON  **** PER DAY</td>
      <td>Year ****/4 Teacher required for Mapperley Area TeacherActive are currently recruiting for a Pri...</td>
      <td>Nottingham, Nottinghamshire, England, West Yorkshire</td>
      <td>UK</td>
      <td>NaN</td>
      <td>contract</td>
      <td>TeacherActive</td>
      <td>Teaching Jobs</td>
      <td>93 - 140/day</td>
      <td>27960.0</td>
      <td>cv-library.co.uk</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>377237</th>
      <td>71623608</td>
      <td>yEAR ****/4 TEACHER  CARLTON  **** PER DAY</td>
      <td>Year ****/4 Teacher required for Mapperley Area TeacherActive are currently recruiting for a Pri...</td>
      <td>Nottinghamshire - Nottingham</td>
      <td>Nottingham</td>
      <td>full_time</td>
      <td>permanent</td>
      <td>UKStaffsearch</td>
      <td>HR &amp; Recruitment Jobs</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ukstaffsearch.com</td>
      <td>Test</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Notice the double space in the job title.</p>
<p>These are all posted by the same company in multiple locations but totaljobs.com has the company name as ‘Triple S Recruitment’ and cv-library.co.uk has it as ‘Triple S Recruitment Ltd’</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df[df.Title <span class="op">==</span> (<span class="st">'Assistant Sales Manager  Market Leading Retailer'</span>)].sort_values(<span class="st">'Company'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Id</th>
      <th>Title</th>
      <th>FullDescription</th>
      <th>LocationRaw</th>
      <th>LocationNormalized</th>
      <th>ContractType</th>
      <th>ContractTime</th>
      <th>Company</th>
      <th>Category</th>
      <th>SalaryRaw</th>
      <th>SalaryNormalized</th>
      <th>SourceName</th>
      <th>split</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30332</th>
      <td>68062445</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>This leading UK retailer has enjoyed over 40 years of success and is a market leader in their fi...</td>
      <td>Bolton Lancashire North West</td>
      <td>Bolton Le Sands</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment</td>
      <td>Sales Jobs</td>
      <td>OTE 35-45k plus benefits</td>
      <td>40000.0</td>
      <td>totaljobs.com</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>227637</th>
      <td>72444806</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>This leading UK retailer has enjoyed over 40 years of success and is a market leader in their fi...</td>
      <td>Colne, Lancashire Lancashire North West</td>
      <td>Colne</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment</td>
      <td>Sales Jobs</td>
      <td>OTE 25- 30k plus benefits</td>
      <td>27500.0</td>
      <td>totaljobs.com</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>230526</th>
      <td>72452426</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>This leading UK retailer has enjoyed over 40 years of success and is a market leader in their fi...</td>
      <td>Stirling Stirlingshire Scotland</td>
      <td>UK</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment</td>
      <td>Sales Jobs</td>
      <td>OTE 30-35k plus benefits</td>
      <td>32500.0</td>
      <td>totaljobs.com</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>230527</th>
      <td>72452429</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>This leading UK retailer has enjoyed over 40 years of success and is a market leader in their fi...</td>
      <td>Brentford Middlesex South East</td>
      <td>UK</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment</td>
      <td>Sales Jobs</td>
      <td>OTE 35-40k plus benefits</td>
      <td>37500.0</td>
      <td>totaljobs.com</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>230936</th>
      <td>72454431</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>This leading UK retailer has enjoyed over 40 years of success and is a market leader in their fi...</td>
      <td>Dundee Angus Scotland</td>
      <td>UK</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment</td>
      <td>Sales Jobs</td>
      <td>OTE 35-45k plus benefits</td>
      <td>40000.0</td>
      <td>totaljobs.com</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>206431</th>
      <td>72120567</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>The future of our client and all of their staff couldn t be brighter, or more exciting. As Brita...</td>
      <td>Cambridge, Cambridgeshire</td>
      <td>Cambridge</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment Ltd</td>
      <td>Retail Jobs</td>
      <td>15000 - 35000/annum OTE 30-35k plus benefits</td>
      <td>25000.0</td>
      <td>cv-library.co.uk</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>206432</th>
      <td>72120572</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>The future of our client and all of their staff couldn t be brighter, or more exciting. As Brita...</td>
      <td>Llandudno, Wales</td>
      <td>Llandudno</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment Ltd</td>
      <td>Retail Jobs</td>
      <td>15000 - 35000/annum OTE 30-35k plus benefits</td>
      <td>25000.0</td>
      <td>cv-library.co.uk</td>
      <td>Train</td>
    </tr>
    <tr>
      <th>279043</th>
      <td>72120569</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>The future of our client and all of their staff couldn t be brighter, or more exciting. As Brita...</td>
      <td>Cannock, Staffordshire</td>
      <td>Cannock</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment Ltd</td>
      <td>Retail Jobs</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>cv-library.co.uk</td>
      <td>Valid</td>
    </tr>
    <tr>
      <th>388642</th>
      <td>72120555</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>The future of our client and all of their staff couldn t be brighter, or more exciting. As Brita...</td>
      <td>Stockton on Tees, North East</td>
      <td>Stockton-On-Tees</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment Ltd</td>
      <td>Retail Jobs</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>cv-library.co.uk</td>
      <td>Test</td>
    </tr>
    <tr>
      <th>206426</th>
      <td>72120557</td>
      <td>Assistant Sales Manager  Market Leading Retailer</td>
      <td>The future of our client and all of their staff couldn t be brighter, or more exciting. As Brita...</td>
      <td>Stirling, Scotland</td>
      <td>Stirling</td>
      <td>NaN</td>
      <td>permanent</td>
      <td>Triple S Recruitment Ltd</td>
      <td>Retail Jobs</td>
      <td>15000 - 35000/annum OTE 30-35k plus benefits</td>
      <td>25000.0</td>
      <td>cv-library.co.uk</td>
      <td>Train</td>
    </tr>
  </tbody>
</table>
<p>66 rows × 13 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>titles[titles.companies <span class="op">==</span> <span class="dv">8</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>companies</th>
      <th>jobs</th>
    </tr>
    <tr>
      <th>Title</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>GRADUATE SALES EXECUTIVE / GRADUATE ACCOUNT MANAGER</th>
      <td>8</td>
      <td>110</td>
    </tr>
    <tr>
      <th>Account Manager / Sales Executive</th>
      <td>8</td>
      <td>58</td>
    </tr>
    <tr>
      <th>Relief Support Worker</th>
      <td>8</td>
      <td>41</td>
    </tr>
    <tr>
      <th>LGV CE Driver</th>
      <td>8</td>
      <td>39</td>
    </tr>
    <tr>
      <th>English Teaching Assistant</th>
      <td>8</td>
      <td>36</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Senior Data Analyst</th>
      <td>8</td>
      <td>8</td>
    </tr>
    <tr>
      <th>Senior Electrical Estimator</th>
      <td>8</td>
      <td>8</td>
    </tr>
    <tr>
      <th>Syndicate Accountant</th>
      <td>8</td>
      <td>8</td>
    </tr>
    <tr>
      <th>Telephone Researcher</th>
      <td>8</td>
      <td>8</td>
    </tr>
    <tr>
      <th>Web Content Editor</th>
      <td>8</td>
      <td>8</td>
    </tr>
  </tbody>
</table>
<p>288 rows × 2 columns</p>
</div>
</div>
</div>
<p>Even at 8 Companies we still get some false positives.</p>
<p>These are all the same job ad!</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df[df.Title <span class="op">==</span> <span class="st">'GRADUATE SALES EXECUTIVE / GRADUATE ACCOUNT MANAGER'</span>].Company.value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>BMS Sales Specialists LLP              27
BMS   Graduate                         16
BMS Graduates                          15
London4Jobs                             5
BMS GROUP                               4
BMS Sales and Marketing Specialists     4
UKStaffsearch                           2
BMS Graduate Recruitment                1
Name: Company, dtype: int64</code></pre>
</div>
</div>
<p>We’ll start the cutoff at 10; the data is reasonably clean there, and captures the top 1% of role titles.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(titles.companies <span class="op">&gt;=</span> <span class="dv">10</span>).mean(), (titles.companies <span class="op">&gt;=</span> <span class="dv">10</span>).<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>(0.008212474192643949, 1611)</code></pre>
</div>
</div>
<p>Output into a CSV for further analysis in a spreadsheet program.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>mkdir <span class="op">-</span>p output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>titles[titles.companies <span class="op">&gt;=</span> <span class="dv">10</span>].to_csv(<span class="st">'output/common_titles.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>