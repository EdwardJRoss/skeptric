<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>skeptric – hackernews-dataset-eda</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">skeptric</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/EdwardJRoss"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="hacker-news-dataset-eda" class="level1">
<h1>Hacker News Dataset EDA</h1>
<p>Tags: python, machine-learning</p>
<p>date: 2022-06-21T21:00:00+10:00</p>
<p>feature_image: /images/hackernews_eda.png</p>
<!--eofm-->
<blockquote class="blockquote">
<p>A mystery! A riddle! A puzzle! A quest! This was the moment that Ada loved best.</p>
<p><em>Ada Twist, Scientist</em>, Andrea Beaty</p>
</blockquote>
<p>This is an exploration of 2021 <a href="https://news.ycombinator.com/">Hacker News</a> posts as a precursor to <a href="https://skeptric.com/book-title-ner-outline/">building a books dataset</a>.</p>
<p>The data was sourced from the Google Bigquery public dataset <code>bigquery-public-data.hacker_news.full</code> using a <a href="https://www.kaggle.com/code/edwardjross/hackernews-2021-export/notebook">Kaggle notebook</a>.</p>
<pre><code>SELECT *
FROM `bigquery-public-data.hacker_news.full`
where '2021-01-01' &lt;= timestamp and timestamp &lt; '2022-01-01'</code></pre>
<p>I want to get a basic understanding of what’s in the dataset before doing any data mining.</p>
<p>The <a href="https://news.ycombinator.com/newsfaq.html">Hacker News FAQ</a> is useful for contextualising some of the fields.</p>
<p>This post was generated with a <a href="../notebooks/hackernews-dataset-eda.html">Jupyter notebook</a>.</p>
<p>Please note that these comments may contain some explicit content.</p>
</section>
<section id="load-in-data" class="level1">
<h1>Load in data</h1>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_columns <span class="op">=</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Download <a href="https://www.kaggle.com/code/edwardjross/hackernews-2021-export/data">the data</a> into this path first.</p>
<p>Make sure we use nullable dtypes to avoid converting integer identifier to floats, and set the unique <code>id</code> as the key.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>hn_path <span class="op">=</span> Path(<span class="st">'../data/hackernews2021.parquet'</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_parquet(hn_path, use_nullable_dtypes<span class="op">=</span><span class="va">True</span>).set_index(<span class="st">'id'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> df.index.is_unique</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> df.index.notna().<span class="bu">all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>Here’s the schema described in Big Query</p>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 11%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>title</td>
<td>STRING</td>
<td>Story title</td>
</tr>
<tr class="even">
<td>url</td>
<td>STRING</td>
<td>Story url</td>
</tr>
<tr class="odd">
<td>text</td>
<td>STRING</td>
<td>Story or comment text</td>
</tr>
<tr class="even">
<td>dead</td>
<td>BOOLEAN</td>
<td>Is dead?</td>
</tr>
<tr class="odd">
<td>by</td>
<td>STRING</td>
<td>The username of the item’s author.</td>
</tr>
<tr class="even">
<td>score</td>
<td>INTEGER</td>
<td>Story score</td>
</tr>
<tr class="odd">
<td>time</td>
<td>INTEGER</td>
<td>Unix time</td>
</tr>
<tr class="even">
<td>timestamp</td>
<td>TIMESTAMP</td>
<td>Timestamp for the unix time</td>
</tr>
<tr class="odd">
<td>type</td>
<td>STRING</td>
<td>Type of details (comment, comment_ranking, poll, story, job, pollopt)</td>
</tr>
<tr class="even">
<td>id</td>
<td>INTEGER</td>
<td>The item’s unique id.</td>
</tr>
<tr class="odd">
<td>parent</td>
<td>INTEGER</td>
<td>Parent comment ID</td>
</tr>
<tr class="even">
<td>descendants</td>
<td>INTEGER</td>
<td>Number of story or poll descendants</td>
</tr>
<tr class="odd">
<td>ranking</td>
<td>INTEGER</td>
<td>Comment ranking</td>
</tr>
<tr class="even">
<td>deleted</td>
<td>BOOLEAN</td>
<td>Is deleted?</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>title                       string
url                         string
text                        string
dead                       boolean
by                          string
score                        Int64
time                         Int64
timestamp      datetime64[ns, UTC]
type                        string
parent                       Int64
descendants                  Int64
ranking                      Int64
deleted                    boolean
dtype: object</code></pre>
</div>
</div>
<p>Here’s a sample of the dataframe.</p>
<p>Note that we can view any individual item by appending the <code>id</code> in the URL <code>https://news.ycombinator.com/item?id=</code></p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>27405131</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>They didn&amp;#x27;t say they &lt;i&gt;weren&amp;#x27;t&lt;/i&gt; ...</td>
      <td>&lt;NA&gt;</td>
      <td>chrisseaton</td>
      <td>&lt;NA&gt;</td>
      <td>1622901869</td>
      <td>2021-06-05 14:04:29+00:00</td>
      <td>comment</td>
      <td>27405089</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27814313</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Check out &lt;a href="https:&amp;#x2F;&amp;#x2F;www.remno...</td>
      <td>&lt;NA&gt;</td>
      <td>noyesno</td>
      <td>&lt;NA&gt;</td>
      <td>1626119705</td>
      <td>2021-07-12 19:55:05+00:00</td>
      <td>comment</td>
      <td>27812726</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28626089</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Like a million-dollars pixel but with letters....</td>
      <td>&lt;NA&gt;</td>
      <td>alainchabat</td>
      <td>&lt;NA&gt;</td>
      <td>1632381114</td>
      <td>2021-09-23 07:11:54+00:00</td>
      <td>comment</td>
      <td>28626017</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27143346</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Not the question...</td>
      <td>&lt;NA&gt;</td>
      <td>SigmundA</td>
      <td>&lt;NA&gt;</td>
      <td>1620920426</td>
      <td>2021-05-13 15:40:26+00:00</td>
      <td>comment</td>
      <td>27143231</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29053108</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>There’s the Unorganized Militia of the United ...</td>
      <td>&lt;NA&gt;</td>
      <td>User23</td>
      <td>&lt;NA&gt;</td>
      <td>1635636573</td>
      <td>2021-10-30 23:29:33+00:00</td>
      <td>comment</td>
      <td>29052087</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>27367848</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Housing supply isn’t something that can’t chan...</td>
      <td>&lt;NA&gt;</td>
      <td>JCM9</td>
      <td>&lt;NA&gt;</td>
      <td>1622636746</td>
      <td>2021-06-02 12:25:46+00:00</td>
      <td>comment</td>
      <td>27367172</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28052800</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Final Fantasy XIV has been experiencing consta...</td>
      <td>&lt;NA&gt;</td>
      <td>amyjess</td>
      <td>&lt;NA&gt;</td>
      <td>1628017217</td>
      <td>2021-08-03 19:00:17+00:00</td>
      <td>comment</td>
      <td>28050798</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28052805</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>How did you resolve it?</td>
      <td>&lt;NA&gt;</td>
      <td>8ytecoder</td>
      <td>&lt;NA&gt;</td>
      <td>1628017238</td>
      <td>2021-08-03 19:00:38+00:00</td>
      <td>comment</td>
      <td>28049375</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26704924</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>This hasn&amp;#x27;t been my experience being vega...</td>
      <td>&lt;NA&gt;</td>
      <td>pacomerh</td>
      <td>&lt;NA&gt;</td>
      <td>1617657938</td>
      <td>2021-04-05 21:25:38+00:00</td>
      <td>comment</td>
      <td>26704794</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27076885</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Death services tread a very fine moral line.  ...</td>
      <td>&lt;NA&gt;</td>
      <td>curryst</td>
      <td>&lt;NA&gt;</td>
      <td>1620400897</td>
      <td>2021-05-07 15:21:37+00:00</td>
      <td>comment</td>
      <td>27075961</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
<p>4155063 rows × 13 columns</p>
</div>
</div>
</div>
<p>Every post has a time, timestamp and parent.</p>
<p>No post has a ranking.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df.notna().mean().<span class="bu">apply</span>(<span class="st">'</span><span class="sc">{:0.2%}</span><span class="st">'</span>.<span class="bu">format</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>title            8.97%
url              8.46%
text            88.57%
dead             3.87%
by              97.22%
score            9.04%
time           100.00%
timestamp      100.00%
type           100.00%
parent          90.64%
descendants      7.00%
ranking          0.00%
deleted          2.78%
dtype: object</code></pre>
</div>
</div>
<p>We filtered to data in 2021, so it’s all in this range</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'timestamp'</span>].<span class="bu">min</span>(), df[<span class="st">'timestamp'</span>].<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>(Timestamp('2021-01-01 00:00:01+0000', tz='UTC'),
 Timestamp('2021-12-31 23:59:50+0000', tz='UTC'))</code></pre>
</div>
</div>
<p>Most threads consist of a <code>story</code> which have <code>comments</code>. Apparently there are also <code>job</code> and <code>poll</code> objects.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'type'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>comment    3766009
story       387194
job           1422
pollopt        385
poll            53
Name: type, dtype: Int64</code></pre>
</div>
</div>
</section>
<section id="date-and-time" class="level1">
<h1>Date and Time</h1>
<p>There’s a spike in January (holidays?) a drop in February (lower days), but a fairly consistent amount of traffic.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'timestamp'</span>].dt.month.value_counts().sort_index().plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-12-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Looking at the daily traffic it look like there may be weekly effects, but aside from a spike towards the end of January it’s fairly consistent.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'timestamp'</span>].dt.date.value_counts().sort_index().plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-13-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Most posts are made on the weekdays</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'timestamp'</span>].dt.day_name().value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>Tuesday      662106
Wednesday    658830
Thursday     654405
Monday       628152
Friday       625707
Sunday       467553
Saturday     458310
Name: timestamp, dtype: int64</code></pre>
</div>
</div>
<p>Based on the <a href="https://skeptric.com/4am-rule/">4am rule</a> is looks like the most common timezone is around UTC-1.</p>
<p>This is slightly surprising, I would expect it could be closer to a US timezone (around -4 to -8). Maybe there’s more posting from other regions than I’d have thought.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'timestamp'</span>].dt.hour.value_counts().sort_index().plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-15-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="story" class="level1">
<h1>Story</h1>
<p>A story consists of a <code>title</code>, and it looks like either a <code>url</code> or <code>text</code></p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>story <span class="op">=</span> df.query(<span class="st">'type=="story"'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>story</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28540306</th>
      <td>CoinCircle for Life</td>
      <td>&lt;NA&gt;</td>
      <td>Hello, Lets join us to CoinCircle for our bett...</td>
      <td>True</td>
      <td>rend-airdrop</td>
      <td>1</td>
      <td>1631719412</td>
      <td>2021-09-15 15:23:32+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26273978</th>
      <td>Find the number of third-party privacy tracker...</td>
      <td>&lt;NA&gt;</td>
      <td>Exodus Privacy is a non-profit organization th...</td>
      <td>True</td>
      <td>moulidorai</td>
      <td>1</td>
      <td>1614341393</td>
      <td>2021-02-26 12:09:53+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27214431</th>
      <td>Ask HN: Desk Recommendations?</td>
      <td>&lt;NA&gt;</td>
      <td>I often see standing desk recommendations here...</td>
      <td>True</td>
      <td>throwaw9l938ni</td>
      <td>1</td>
      <td>1621458219</td>
      <td>2021-05-19 21:03:39+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>25705820</th>
      <td>Demand Hunter Biden Be Arrested</td>
      <td>&lt;NA&gt;</td>
      <td>There are so many pictures of Hunter Biden, Jo...</td>
      <td>True</td>
      <td>bidenpedo</td>
      <td>1</td>
      <td>1610232470</td>
      <td>2021-01-09 22:47:50+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26110009</th>
      <td>Deep learning multivariate nonlinear regression</td>
      <td>&lt;NA&gt;</td>
      <td>Does deep learning really work for regression ...</td>
      <td>True</td>
      <td>dl_regression</td>
      <td>1</td>
      <td>1613095333</td>
      <td>2021-02-12 02:02:13+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>28773509</th>
      <td>Apple to face EU antitrust charge over NFC chip</td>
      <td>https://www.reuters.com/technology/exclusive-e...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>nojito</td>
      <td>170</td>
      <td>1633530062</td>
      <td>2021-10-06 14:21:02+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>219</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26400239</th>
      <td>The Roblox Microverse</td>
      <td>https://stratechery.com/2021/the-roblox-microv...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Kinrany</td>
      <td>173</td>
      <td>1615306495</td>
      <td>2021-03-09 16:14:55+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>203</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27559832</th>
      <td>Safari 15 on Mac OS, a user interface mess</td>
      <td>https://morrick.me/archives/9368</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>freediver</td>
      <td>463</td>
      <td>1624104913</td>
      <td>2021-06-19 12:15:13+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>353</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26992205</th>
      <td>Stock Market Returns Are Anything but Average</td>
      <td>https://awealthofcommonsense.com/2021/04/stock...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>RickJWagner</td>
      <td>222</td>
      <td>1619783307</td>
      <td>2021-04-30 11:48:27+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>413</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29738298</th>
      <td>Tokyo police lose 2 floppy disks containing in...</td>
      <td>https://mainichi.jp/english/articles/20211227/...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>ardel95</td>
      <td>232</td>
      <td>1640883038</td>
      <td>2021-12-30 16:50:38+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>218</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
<p>387194 rows × 13 columns</p>
</div>
</div>
</div>
<p>Stories normally have title and a URL, and occasionally have text.</p>
<p>They’re almost always <code>by</code> someone, and have a <code>score</code>. They never have a <code>parent</code> (they’re always top level), but they normally have <code>descendants</code>.</p>
<p>Some are dead (removed by Hacker News) and some are deleted (removed by the author).</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    story</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    .notna()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="st">'</span><span class="sc">{:0.1%}</span><span class="st">'</span>.<span class="bu">format</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>title           95.9%
url             90.5%
text             4.9%
dead            22.5%
by              96.6%
score           96.6%
time           100.0%
timestamp      100.0%
type           100.0%
parent           0.0%
descendants     75.1%
ranking          0.0%
deleted          3.4%
dtype: object</code></pre>
</div>
</div>
<p>By seems to be missing only for deleted stories</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    story</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">'by.isna()'</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>26779931</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1618238390</td>
      <td>2021-04-12 14:39:50+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>26122158</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1613203434</td>
      <td>2021-02-13 08:03:54+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>25699401</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1610190538</td>
      <td>2021-01-09 11:08:58+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>26206857</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1613848074</td>
      <td>2021-02-20 19:07:54+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>26316571</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1614700390</td>
      <td>2021-03-02 15:53:10+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>28201589</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1629140598</td>
      <td>2021-08-16 19:03:18+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>26786548</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1618271177</td>
      <td>2021-04-12 23:46:17+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>26689984</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1617548611</td>
      <td>2021-04-04 15:03:31+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>27349809</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1622509992</td>
      <td>2021-06-01 01:13:12+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
    <tr>
      <th>25913791</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>1611651379</td>
      <td>2021-01-26 08:56:19+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
<p>13300 rows × 13 columns</p>
</div>
</div>
</div>
<p>Every story has a <code>by</code> unless it’s deleted or dead.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    story</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">'by.isna() &amp; deleted.isna() &amp; dead.isna()'</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>How do I make a link in a text submission?</strong></p>
<p>You can’t. This is to prevent people from submitting a link with their comments in a privileged position at the top of the page. If you want to submit a link with comments, just submit it, then add a regular comment.</p>
</blockquote>
<p>This seems to be true most of the time</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    story</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        has_url <span class="op">=</span> <span class="kw">lambda</span> _: <span class="op">~</span>_.url.isna(),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        has_text <span class="op">=</span> <span class="kw">lambda</span> _: <span class="op">~</span>_.text.isna(),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        has_url_and_text <span class="op">=</span> <span class="kw">lambda</span> _: _.has_url <span class="op">&amp;</span> _.has_text,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        has_url_or_text <span class="op">=</span> <span class="kw">lambda</span> _: _.has_url <span class="op">|</span> _.has_text,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(like<span class="op">=</span><span class="st">'has_'</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>has_url             0.904606
has_text            0.048536
has_url_and_text    0.000031
has_url_or_text     0.953111
dtype: float64</code></pre>
</div>
</div>
<p>There seems to be a few exceptions for Show HN.</p>
<p>We actually don’t have metadata to identify Ask HN and Show HN.</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>story.query(<span class="st">'~url.isna() &amp; ~text.isna()'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28074827</th>
      <td>Show HN: Visualizing a Codebase</td>
      <td>https://octo.github.com/projects/repo-visualiz...</td>
      <td>I explored an alternative way to view codebase...</td>
      <td>&lt;NA&gt;</td>
      <td>wattenberger</td>
      <td>283</td>
      <td>1628176192</td>
      <td>2021-08-05 15:09:52+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>96</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29019925</th>
      <td>Show HN: Guestio – A better way to find and bo...</td>
      <td>https://guestio.com/</td>
      <td>Guestio is an all-in-one tool designed to help...</td>
      <td>&lt;NA&gt;</td>
      <td>travischappelll</td>
      <td>4</td>
      <td>1635374411</td>
      <td>2021-10-27 22:40:11+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>2</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26346586</th>
      <td>Show HN: Practical Python Projects book release</td>
      <td>https://practicalpython.yasoob.me</td>
      <td>Hi everyone!&lt;p&gt;I just released the Practical P...</td>
      <td>&lt;NA&gt;</td>
      <td>yasoob</td>
      <td>88</td>
      <td>1614884336</td>
      <td>2021-03-04 18:58:56+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>14</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27787426</th>
      <td>Show HN: Homer – A tool to build interactive t...</td>
      <td>https://usehomer.app</td>
      <td>Hi HN, my name is Rahul Sarathy and I built Ho...</td>
      <td>&lt;NA&gt;</td>
      <td>Outofthebot</td>
      <td>62</td>
      <td>1625858111</td>
      <td>2021-07-09 19:15:11+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>26</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27684916</th>
      <td>Why do we work so damn much?</td>
      <td>https://www.nytimes.com/2021/06/29/opinion/ezr...</td>
      <td>The New York Times: Opinion | Why Do We Work S...</td>
      <td>&lt;NA&gt;</td>
      <td>anirudhgarg</td>
      <td>44</td>
      <td>1625027907</td>
      <td>2021-06-30 04:38:27+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>62</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27257586</th>
      <td>C is not a serious programming language</td>
      <td>https://www.yodaiken.com/2021/05/16/c-is-not-a...</td>
      <td>&amp;lt;https:&amp;#x2F;&amp;#x2F;www.yodaiken.com&amp;#x2F;20...</td>
      <td>True</td>
      <td>vyodaiken</td>
      <td>1</td>
      <td>1621796527</td>
      <td>2021-05-23 19:02:07+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28934833</th>
      <td>Bioelektryczność – Polish Robotics (1968) [video]</td>
      <td>https://www.youtube.com/watch?v=NjrYk546uBA</td>
      <td>I&amp;#x27;m curious what was the state of an art ...</td>
      <td>&lt;NA&gt;</td>
      <td>danielEM</td>
      <td>134</td>
      <td>1634757119</td>
      <td>2021-10-20 19:11:59+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>28</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26998308</th>
      <td>Show HN: Second-Chance Pool</td>
      <td>https://news.ycombinator.com/pool</td>
      <td>HN&amp;#x27;s second-chance pool is a way to give ...</td>
      <td>&lt;NA&gt;</td>
      <td>dang</td>
      <td>543</td>
      <td>1619811719</td>
      <td>2021-04-30 19:41:59+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>91</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29225588</th>
      <td>Show HN: Grapic – Real whiteboards online usin...</td>
      <td>https://www.grapic.co/</td>
      <td>Hi HN,&lt;p&gt;During the pandemic, two friends and ...</td>
      <td>&lt;NA&gt;</td>
      <td>nikonp</td>
      <td>97</td>
      <td>1636969643</td>
      <td>2021-11-15 09:47:23+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>24</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29705761</th>
      <td>Diego Rivera’s Vaccine Mural in Detroit in the...</td>
      <td>https://historyofvaccines.blog/2021/07/12/dieg...</td>
      <td>https:&amp;#x2F;&amp;#x2F;historyofvaccines.blog&amp;#x2F;...</td>
      <td>&lt;NA&gt;</td>
      <td>barbe</td>
      <td>4</td>
      <td>1640632550</td>
      <td>2021-12-27 19:15:50+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26251143</th>
      <td>My experience as a Gazan girl getting into Sil...</td>
      <td>https://daliaawad28.medium.com/my-experience-a...</td>
      <td>Hiii everyone, this is my first time posting h...</td>
      <td>&lt;NA&gt;</td>
      <td>daliaawad</td>
      <td>1723</td>
      <td>1614181663</td>
      <td>2021-02-24 15:47:43+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>460</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29655974</th>
      <td>Show HN: Jig – a tool to define, compute and m...</td>
      <td>https://www.jigdev.com</td>
      <td>Hi HN,&lt;p&gt;8 months ago, I posted “Ask HN: I bui...</td>
      <td>&lt;NA&gt;</td>
      <td>d--b</td>
      <td>74</td>
      <td>1640210325</td>
      <td>2021-12-22 21:58:45+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>24</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>The scores look like they follow a sort of power law.</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    story</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">'dead.isna() &amp; deleted.isna()'</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    .score</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    .fillna(<span class="fl">0.</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    .plot</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    .hist(logy<span class="op">=</span><span class="va">True</span>, bins<span class="op">=</span><span class="dv">40</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-22-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>And descendants follow a similar path</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    story</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">'dead.isna() &amp; deleted.isna()'</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    .descendants</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    .fillna(<span class="fl">0.</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    .plot</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    .hist(logy<span class="op">=</span><span class="va">True</span>, bins<span class="op">=</span><span class="dv">40</span>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-23-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>It looks like the titles must be below around 80 characters and are typically around 60</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>story.title.fillna(<span class="st">''</span>).<span class="bu">str</span>.<span class="bu">len</span>().plot.hist(bins<span class="op">=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-24-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>The text can be much longer and follows a decaying distribution</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>story.text.fillna(<span class="st">''</span>).<span class="bu">str</span>.<span class="bu">len</span>().plot.hist(bins<span class="op">=</span><span class="dv">20</span>, logy<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-25-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Some URLs can be <em>very</em> long (I guess they can have all sorts of query parameters)</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>story.url.fillna(<span class="st">''</span>).<span class="bu">str</span>.<span class="bu">len</span>().plot.hist(bins<span class="op">=</span><span class="dv">20</span>, logy<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-26-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.parse <span class="im">import</span> urlparse</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Common hosts; Github, YouTube, twitter</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>story_url_host_counts <span class="op">=</span> story[<span class="st">'url'</span>].dropna().<span class="bu">map</span>(<span class="kw">lambda</span> x: urlparse(x).hostname).value_counts()</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>story_url_host_counts.head(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>github.com                13622
www.youtube.com           12843
twitter.com                6968
en.wikipedia.org           6218
www.nytimes.com            5647
medium.com                 4964
www.theguardian.com        4244
arstechnica.com            3545
www.bloomberg.com          3007
www.bbc.com                2996
www.theverge.com           2888
dev.to                     2746
www.wsj.com                2704
www.reuters.com            2445
techcrunch.com             1820
www.cnbc.com               1792
www.reddit.com             1430
www.bbc.co.uk              1426
www.washingtonpost.com     1413
www.theatlantic.com        1374
Name: url, dtype: int64</code></pre>
</div>
</div>
<p>Again a small handful of hosts get most of the links</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>story_url_host_counts.plot.hist(logy<span class="op">=</span><span class="va">True</span>, bins<span class="op">=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-29-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>There are some power users that post a <em>lot</em> of stories</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>story_by_counts <span class="op">=</span> story.by.value_counts()</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>story_by_counts.head(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>Tomte              4856
todsacerdoti       3031
tosh               2940
pseudolus          2876
rbanffy            2875
mooreds            1915
samizdis           1834
giuliomagnifico    1570
feross             1491
CapitalistCartr    1413
ingve              1399
fortran77          1358
gmays              1162
infodocket         1098
belter             1078
graderjs           1061
elsewhen           1053
kiyanwang          1009
1cvmask            1005
LinuxBender         996
Name: by, dtype: Int64</code></pre>
</div>
</div>
<p>And again a fast decline</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>story_by_counts.plot.hist(logy<span class="op">=</span><span class="va">True</span>, bins<span class="op">=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>&lt;AxesSubplot:ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-31-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="comments" class="level1">
<h1>Comments</h1>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>comments <span class="op">=</span> df.query(<span class="st">'type == "comment"'</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>comments</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>27405131</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>They didn&amp;#x27;t say they &lt;i&gt;weren&amp;#x27;t&lt;/i&gt; ...</td>
      <td>&lt;NA&gt;</td>
      <td>chrisseaton</td>
      <td>&lt;NA&gt;</td>
      <td>1622901869</td>
      <td>2021-06-05 14:04:29+00:00</td>
      <td>comment</td>
      <td>27405089</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27814313</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Check out &lt;a href="https:&amp;#x2F;&amp;#x2F;www.remno...</td>
      <td>&lt;NA&gt;</td>
      <td>noyesno</td>
      <td>&lt;NA&gt;</td>
      <td>1626119705</td>
      <td>2021-07-12 19:55:05+00:00</td>
      <td>comment</td>
      <td>27812726</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28626089</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Like a million-dollars pixel but with letters....</td>
      <td>&lt;NA&gt;</td>
      <td>alainchabat</td>
      <td>&lt;NA&gt;</td>
      <td>1632381114</td>
      <td>2021-09-23 07:11:54+00:00</td>
      <td>comment</td>
      <td>28626017</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27143346</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Not the question...</td>
      <td>&lt;NA&gt;</td>
      <td>SigmundA</td>
      <td>&lt;NA&gt;</td>
      <td>1620920426</td>
      <td>2021-05-13 15:40:26+00:00</td>
      <td>comment</td>
      <td>27143231</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29053108</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>There’s the Unorganized Militia of the United ...</td>
      <td>&lt;NA&gt;</td>
      <td>User23</td>
      <td>&lt;NA&gt;</td>
      <td>1635636573</td>
      <td>2021-10-30 23:29:33+00:00</td>
      <td>comment</td>
      <td>29052087</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>27367848</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Housing supply isn’t something that can’t chan...</td>
      <td>&lt;NA&gt;</td>
      <td>JCM9</td>
      <td>&lt;NA&gt;</td>
      <td>1622636746</td>
      <td>2021-06-02 12:25:46+00:00</td>
      <td>comment</td>
      <td>27367172</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28052800</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Final Fantasy XIV has been experiencing consta...</td>
      <td>&lt;NA&gt;</td>
      <td>amyjess</td>
      <td>&lt;NA&gt;</td>
      <td>1628017217</td>
      <td>2021-08-03 19:00:17+00:00</td>
      <td>comment</td>
      <td>28050798</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28052805</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>How did you resolve it?</td>
      <td>&lt;NA&gt;</td>
      <td>8ytecoder</td>
      <td>&lt;NA&gt;</td>
      <td>1628017238</td>
      <td>2021-08-03 19:00:38+00:00</td>
      <td>comment</td>
      <td>28049375</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26704924</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>This hasn&amp;#x27;t been my experience being vega...</td>
      <td>&lt;NA&gt;</td>
      <td>pacomerh</td>
      <td>&lt;NA&gt;</td>
      <td>1617657938</td>
      <td>2021-04-05 21:25:38+00:00</td>
      <td>comment</td>
      <td>26704794</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27076885</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>Death services tread a very fine moral line.  ...</td>
      <td>&lt;NA&gt;</td>
      <td>curryst</td>
      <td>&lt;NA&gt;</td>
      <td>1620400897</td>
      <td>2021-05-07 15:21:37+00:00</td>
      <td>comment</td>
      <td>27075961</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
<p>3766009 rows × 13 columns</p>
</div>
</div>
</div>
<p>Comments can’t have a tile or a URL.</p>
<p>They almost always have a <code>text</code> and a <code>by</code> (I’d guess it’s missing for deleted and dead threads).</p>
<p>We don’t ever get a <code>score</code> or <code>ranking</code> or <code>descendants</code> even though these things may make sense.</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    comments</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    .notna()</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="st">'</span><span class="sc">{:0.1%}</span><span class="st">'</span>.<span class="bu">format</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>title            0.0%
url              0.0%
text            97.2%
dead             2.0%
by              97.3%
score            0.0%
time           100.0%
timestamp      100.0%
type           100.0%
parent         100.0%
descendants      0.0%
ranking          0.0%
deleted          2.7%
dtype: object</code></pre>
</div>
</div>
</section>
<section id="parents" class="level1">
<h1>Parents</h1>
<p>We can look at the type of the parent’s comments (they’ll sometimes be missing if the parent was posted before our cutoff date.</p>
<p>Most comments parent is another comment in a thread.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    comments</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    .merge(df[<span class="st">'type'</span>], how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'parent'</span>, right_index<span class="op">=</span><span class="va">True</span>, suffixes<span class="op">=</span>(<span class="st">''</span>, <span class="st">'_parent'</span>), validate<span class="op">=</span><span class="st">'m:1'</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'type_parent'</span>]</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    .value_counts(dropna<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>comment    2997792
story       765342
&lt;NA&gt;          2412
poll           463
Name: type_parent, dtype: Int64</code></pre>
</div>
</div>
<p>We can efficiently look up a parent using a dictionary, returning <code>&lt;NA&gt;</code> when it’s not there.</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>parent_dict <span class="op">=</span> df[<span class="st">'parent'</span>].dropna().to_dict()</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>parent_dict <span class="op">=</span> defaultdict(<span class="kw">lambda</span>: pd.NA, parent_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'parent'</span>].<span class="bu">map</span>(parent_dict, na_action<span class="op">=</span><span class="st">'ignore'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 2.4 s, sys: 28.1 ms, total: 2.43 s
Wall time: 2.43 s</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>id
27405131    27405024
27814313    27807850
28626089    28625485
27143346    27142955
29053108    29052012
              ...   
27367848        &lt;NA&gt;
28052800    28049873
28052805    28046997
26704924    26704392
27076885    27074332
Name: parent, Length: 4155063, dtype: object</code></pre>
</div>
</div>
<p>We can do this iteratively to find all the parents.</p>
<p>When there is no parent we’ll return <code>&lt;NA&gt;</code>; this particular way of doing it gets faster the fewer non-null elements there are.</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tqdm.notebook <span class="im">import</span> tqdm</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>MAX_DEPTH <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'parent0'</span>] <span class="op">=</span> df[<span class="st">'parent'</span>]</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> tqdm(<span class="bu">range</span>(MAX_DEPTH)):</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    last_col <span class="op">=</span> <span class="ss">f'parent</span><span class="sc">{</span>idx<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    col <span class="op">=</span> <span class="ss">f'parent</span><span class="sc">{</span>idx<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">'</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    df[col] <span class="op">=</span> df[last_col].<span class="bu">map</span>(parent_dict, na_action<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> df[col].isna().<span class="bu">all</span>():</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">del</span> df[col]</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"d6bb2009f6294fafacd0c0356d9efdd2","version_major":2,"version_minor":0}
</script>
</div>
</div>
<p>We can now see all the parents of any element</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">filter</span>(regex<span class="op">=</span><span class="st">'parent\d+'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>parent0</th>
      <th>parent1</th>
      <th>parent2</th>
      <th>parent3</th>
      <th>parent4</th>
      <th>parent5</th>
      <th>parent6</th>
      <th>parent7</th>
      <th>parent8</th>
      <th>parent9</th>
      <th>parent10</th>
      <th>parent11</th>
      <th>parent12</th>
      <th>parent13</th>
      <th>parent14</th>
      <th>parent15</th>
      <th>parent16</th>
      <th>parent17</th>
      <th>parent18</th>
      <th>parent19</th>
      <th>parent20</th>
      <th>parent21</th>
      <th>parent22</th>
      <th>parent23</th>
      <th>parent24</th>
      <th>parent25</th>
      <th>parent26</th>
      <th>parent27</th>
      <th>parent28</th>
      <th>parent29</th>
      <th>parent30</th>
      <th>parent31</th>
      <th>parent32</th>
      <th>parent33</th>
      <th>parent34</th>
      <th>parent35</th>
      <th>parent36</th>
      <th>parent37</th>
      <th>parent38</th>
      <th>parent39</th>
      <th>parent40</th>
      <th>parent41</th>
      <th>parent42</th>
      <th>parent43</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>27405131</th>
      <td>27405089</td>
      <td>27405024</td>
      <td>27404902</td>
      <td>27404548</td>
      <td>27404512</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27814313</th>
      <td>27812726</td>
      <td>27807850</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28626089</th>
      <td>28626017</td>
      <td>28625485</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27143346</th>
      <td>27143231</td>
      <td>27142955</td>
      <td>27142884</td>
      <td>27142567</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>29053108</th>
      <td>29052087</td>
      <td>29052012</td>
      <td>29051947</td>
      <td>29051758</td>
      <td>29051607</td>
      <td>29051478</td>
      <td>29051448</td>
      <td>29051365</td>
      <td>29051109</td>
      <td>29043296</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>27367848</th>
      <td>27367172</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28052800</th>
      <td>28050798</td>
      <td>28049873</td>
      <td>28049688</td>
      <td>28049620</td>
      <td>28049359</td>
      <td>28048919</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>28052805</th>
      <td>28049375</td>
      <td>28046997</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>26704924</th>
      <td>26704794</td>
      <td>26704392</td>
      <td>26703874</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>27076885</th>
      <td>27075961</td>
      <td>27074332</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
<p>4155063 rows × 44 columns</p>
</div>
</div>
</div>
<p>One useful concept is the <em>root</em>, the parent that has no parents itself (generally because it’s top level, but sometimes because the parent isn’t in the dataframe).</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> <span class="va">None</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> df.<span class="bu">filter</span>(regex<span class="op">=</span><span class="st">'parent\d+'</span>).iloc[:,::<span class="op">-</span><span class="dv">1</span>]:</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> root <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>        root <span class="op">=</span> df[col]</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>        root <span class="op">=</span> root.combine_first(df[col])</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'root'</span>] <span class="op">=</span> root</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 11.1 s, sys: 826 ms, total: 11.9 s
Wall time: 11.9 s</code></pre>
</div>
</div>
<p>We can also get the depth; how parents does it have?</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'depth'</span>] <span class="op">=</span> df.<span class="bu">filter</span>(regex<span class="op">=</span><span class="st">'parent\d+'</span>).notna().<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What’s the distribution of depth for comments?</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>comments <span class="op">=</span> df.query(<span class="st">'type=="comment"'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That’s some kind of zero-inflated distribution.</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>comments[<span class="st">'depth'</span>].value_counts().plot(logy<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-42-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>We can check the type of the root (we get <code>&lt;NA&gt;</code> when it’s not in the tree).</p>
<p>The vast majority of the the root of a comment is a story.</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df.merge(comments[<span class="st">'root'</span>], left_index<span class="op">=</span><span class="va">True</span>, right_on<span class="op">=</span><span class="st">'root'</span>, how<span class="op">=</span><span class="st">'right'</span>)[<span class="st">'type'</span>].value_counts(dropna<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>story    3759475
&lt;NA&gt;        5181
poll        1353
Name: type, dtype: Int64</code></pre>
</div>
</div>
<p>Let’s compare the <code>descendants</code> column with the</p>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>stories <span class="op">=</span> df.query(<span class="st">'type=="story"'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'root'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>25706993    4029
28693060    3088
25661474    2638
26347654    2372
26487854    2155
            ... 
27038587       1
26640257       1
28404872       1
27531105       1
28347619       1
Name: root, Length: 121760, dtype: int64</code></pre>
</div>
</div>
<p>They’re highly correlated with some outliers near zero.</p>
<p>Some reasons I can think they would differ:</p>
<ul>
<li>Time Filter - we may miss some comments made after the time cutoff (would make descendants &gt; children)</li>
<li>Time of capture - there may be some uncounted descendants if they were captured before children (would make descendants &lt; children)</li>
<li>Exclusions - descendants may not be counted if they are dead or deleted (would make descendants &lt; children)</li>
</ul>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>children_counts <span class="op">=</span> comments.loc[comments[<span class="st">'dead'</span>].isna() <span class="op">&amp;</span> comments[<span class="st">'deleted'</span>].isna(), <span class="st">'root'</span>].value_counts().rename(<span class="st">'children'</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>children_counts <span class="op">=</span> pd.concat([stories[<span class="st">'descendants'</span>], comments.loc[comments[<span class="st">'dead'</span>].isna() <span class="op">&amp;</span> comments[<span class="st">'deleted'</span>].isna(), <span class="st">'root'</span>].value_counts().rename(<span class="st">'children'</span>)], axis<span class="op">=</span><span class="dv">1</span>).fillna(<span class="dv">0</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>children_counts.plot.scatter(<span class="st">'descendants'</span>, <span class="st">'children'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>&lt;AxesSubplot:xlabel='descendants', ylabel='children'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-46-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>children_counts[<span class="st">'diff'</span>] <span class="op">=</span> children_counts[<span class="st">'descendants'</span>] <span class="op">-</span> children_counts[<span class="st">'children'</span>]</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>children_counts.plot.scatter(<span class="st">'descendants'</span>, <span class="st">'diff'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>&lt;AxesSubplot:xlabel='descendants', ylabel='diff'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="hackernews-dataset-eda_files/figure-html/cell-47-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>The cases where descendants &gt;&gt; children they were posted near our cutoff date, the end of 2021.</p>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>children_counts[children_counts[<span class="st">'diff'</span>] <span class="op">&gt;</span> <span class="dv">100</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>descendants</th>
      <th>children</th>
      <th>diff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>29752379</th>
      <td>155</td>
      <td>0.0</td>
      <td>155.0</td>
    </tr>
    <tr>
      <th>29749123</th>
      <td>126</td>
      <td>0.0</td>
      <td>126.0</td>
    </tr>
    <tr>
      <th>29753218</th>
      <td>207</td>
      <td>63.0</td>
      <td>144.0</td>
    </tr>
    <tr>
      <th>29753513</th>
      <td>130</td>
      <td>0.0</td>
      <td>130.0</td>
    </tr>
    <tr>
      <th>29753183</th>
      <td>275</td>
      <td>26.0</td>
      <td>249.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>df.loc[children_counts[children_counts[<span class="st">'diff'</span>] <span class="op">&gt;</span> <span class="dv">100</span>].index]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
      <th>parent0</th>
      <th>parent1</th>
      <th>parent2</th>
      <th>parent3</th>
      <th>parent4</th>
      <th>parent5</th>
      <th>parent6</th>
      <th>parent7</th>
      <th>parent8</th>
      <th>parent9</th>
      <th>parent10</th>
      <th>parent11</th>
      <th>parent12</th>
      <th>parent13</th>
      <th>parent14</th>
      <th>parent15</th>
      <th>parent16</th>
      <th>parent17</th>
      <th>parent18</th>
      <th>parent19</th>
      <th>parent20</th>
      <th>parent21</th>
      <th>parent22</th>
      <th>parent23</th>
      <th>parent24</th>
      <th>parent25</th>
      <th>parent26</th>
      <th>parent27</th>
      <th>parent28</th>
      <th>parent29</th>
      <th>parent30</th>
      <th>parent31</th>
      <th>parent32</th>
      <th>parent33</th>
      <th>parent34</th>
      <th>parent35</th>
      <th>parent36</th>
      <th>parent37</th>
      <th>parent38</th>
      <th>parent39</th>
      <th>parent40</th>
      <th>parent41</th>
      <th>parent42</th>
      <th>parent43</th>
      <th>root</th>
      <th>depth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>29752379</th>
      <td>A Guide to Twitter</td>
      <td>https://tasshin.com/blog/a-guide-to-twitter/</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>mwfogleman</td>
      <td>228</td>
      <td>1640983643</td>
      <td>2021-12-31 20:47:23+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>155</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>29749123</th>
      <td>Safest mushrooms to forage and eat</td>
      <td>https://www.fieldandstream.com/story/survival/...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>mizzao</td>
      <td>167</td>
      <td>1640965909</td>
      <td>2021-12-31 15:51:49+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>126</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>29753218</th>
      <td>Why Brahmins lead Western firms but rarely Ind...</td>
      <td>https://www.economist.com/asia/2022/01/01/why-...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>pseudolus</td>
      <td>141</td>
      <td>1640990143</td>
      <td>2021-12-31 22:35:43+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>207</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>29753513</th>
      <td>If – A Poem by Rudyard Kipling</td>
      <td>https://poets.org/poem/if</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>BrindleBox</td>
      <td>282</td>
      <td>1640992493</td>
      <td>2021-12-31 23:14:53+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>130</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>29753183</th>
      <td>Belgian scientific base in Antarctica engulfed...</td>
      <td>https://www.brusselstimes.com/belgium-all-news...</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>justinzollars</td>
      <td>227</td>
      <td>1640989917</td>
      <td>2021-12-31 22:31:57+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>275</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>All the cases that error on this side there are no descendants</p>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>children_counts[children_counts[<span class="st">'diff'</span>] <span class="op">&lt;</span> <span class="op">-</span><span class="dv">100</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>descendants</th>
      <th>children</th>
      <th>diff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28733467</th>
      <td>0</td>
      <td>197.0</td>
      <td>-197.0</td>
    </tr>
    <tr>
      <th>28761974</th>
      <td>0</td>
      <td>247.0</td>
      <td>-247.0</td>
    </tr>
    <tr>
      <th>28752512</th>
      <td>0</td>
      <td>297.0</td>
      <td>-297.0</td>
    </tr>
    <tr>
      <th>25669864</th>
      <td>0</td>
      <td>946.0</td>
      <td>-946.0</td>
    </tr>
    <tr>
      <th>25594068</th>
      <td>0</td>
      <td>329.0</td>
      <td>-329.0</td>
    </tr>
    <tr>
      <th>25598606</th>
      <td>0</td>
      <td>230.0</td>
      <td>-230.0</td>
    </tr>
    <tr>
      <th>25598768</th>
      <td>0</td>
      <td>191.0</td>
      <td>-191.0</td>
    </tr>
    <tr>
      <th>25597891</th>
      <td>0</td>
      <td>184.0</td>
      <td>-184.0</td>
    </tr>
    <tr>
      <th>25591202</th>
      <td>0</td>
      <td>153.0</td>
      <td>-153.0</td>
    </tr>
    <tr>
      <th>25590022</th>
      <td>0</td>
      <td>129.0</td>
      <td>-129.0</td>
    </tr>
    <tr>
      <th>25732809</th>
      <td>0</td>
      <td>127.0</td>
      <td>-127.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>There are a few cases where it’s not in the index at all (maybe the story was posted just before the cutoff? we could confirm this with the children dates)</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>children_counts[children_counts[<span class="st">'diff'</span>] <span class="op">&lt;</span> <span class="op">-</span><span class="dv">100</span>][<span class="op">~</span>children_counts[children_counts[<span class="st">'diff'</span>] <span class="op">&lt;</span> <span class="op">-</span><span class="dv">100</span>].index.isin(df.index)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>descendants</th>
      <th>children</th>
      <th>diff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>25594068</th>
      <td>0</td>
      <td>329.0</td>
      <td>-329.0</td>
    </tr>
    <tr>
      <th>25598606</th>
      <td>0</td>
      <td>230.0</td>
      <td>-230.0</td>
    </tr>
    <tr>
      <th>25598768</th>
      <td>0</td>
      <td>191.0</td>
      <td>-191.0</td>
    </tr>
    <tr>
      <th>25597891</th>
      <td>0</td>
      <td>184.0</td>
      <td>-184.0</td>
    </tr>
    <tr>
      <th>25591202</th>
      <td>0</td>
      <td>153.0</td>
      <td>-153.0</td>
    </tr>
    <tr>
      <th>25590022</th>
      <td>0</td>
      <td>129.0</td>
      <td>-129.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>For the others</p>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>children_counts[(children_counts[<span class="st">'diff'</span>] <span class="op">&lt;</span> <span class="op">-</span><span class="dv">100</span>) <span class="op">&amp;</span> children_counts.index.isin(df.index)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>descendants</th>
      <th>children</th>
      <th>diff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28733467</th>
      <td>0</td>
      <td>197.0</td>
      <td>-197.0</td>
    </tr>
    <tr>
      <th>28761974</th>
      <td>0</td>
      <td>247.0</td>
      <td>-247.0</td>
    </tr>
    <tr>
      <th>28752512</th>
      <td>0</td>
      <td>297.0</td>
      <td>-297.0</td>
    </tr>
    <tr>
      <th>25669864</th>
      <td>0</td>
      <td>946.0</td>
      <td>-946.0</td>
    </tr>
    <tr>
      <th>25732809</th>
      <td>0</td>
      <td>127.0</td>
      <td>-127.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Most of the time they differ its because the story is dead.</p>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>df.loc[children_counts[(children_counts[<span class="st">'diff'</span>] <span class="op">&lt;</span> <span class="op">-</span><span class="dv">100</span>) <span class="op">&amp;</span> children_counts.index.isin(df.index)].index]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>title</th>
      <th>url</th>
      <th>text</th>
      <th>dead</th>
      <th>by</th>
      <th>score</th>
      <th>time</th>
      <th>timestamp</th>
      <th>type</th>
      <th>parent</th>
      <th>descendants</th>
      <th>ranking</th>
      <th>deleted</th>
      <th>parent0</th>
      <th>parent1</th>
      <th>parent2</th>
      <th>parent3</th>
      <th>parent4</th>
      <th>parent5</th>
      <th>parent6</th>
      <th>parent7</th>
      <th>parent8</th>
      <th>parent9</th>
      <th>parent10</th>
      <th>parent11</th>
      <th>parent12</th>
      <th>parent13</th>
      <th>parent14</th>
      <th>parent15</th>
      <th>parent16</th>
      <th>parent17</th>
      <th>parent18</th>
      <th>parent19</th>
      <th>parent20</th>
      <th>parent21</th>
      <th>parent22</th>
      <th>parent23</th>
      <th>parent24</th>
      <th>parent25</th>
      <th>parent26</th>
      <th>parent27</th>
      <th>parent28</th>
      <th>parent29</th>
      <th>parent30</th>
      <th>parent31</th>
      <th>parent32</th>
      <th>parent33</th>
      <th>parent34</th>
      <th>parent35</th>
      <th>parent36</th>
      <th>parent37</th>
      <th>parent38</th>
      <th>parent39</th>
      <th>parent40</th>
      <th>parent41</th>
      <th>parent42</th>
      <th>parent43</th>
      <th>root</th>
      <th>depth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28733467</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
      <td>19h</td>
      <td>304</td>
      <td>1633221213</td>
      <td>2021-10-03 00:33:33+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>28761974</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
      <td>anaclet0</td>
      <td>273</td>
      <td>1633452489</td>
      <td>2021-10-05 16:48:09+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>28752512</th>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>True</td>
      <td>adtac</td>
      <td>263</td>
      <td>1633384130</td>
      <td>2021-10-04 21:48:50+00:00</td>
      <td>story</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>25669864</th>
      <td>Poll: Switching from WhatsApp</td>
      <td>&lt;NA&gt;</td>
      <td>So many choices, so much discussion.  Looking ...</td>
      <td>&lt;NA&gt;</td>
      <td>ColinWright</td>
      <td>1004</td>
      <td>1610019203</td>
      <td>2021-01-07 11:33:23+00:00</td>
      <td>poll</td>
      <td>&lt;NA&gt;</td>
      <td>945</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
    <tr>
      <th>25732809</th>
      <td>Poll: Do you agree with Amazon, Apple and Goog...</td>
      <td>&lt;NA&gt;</td>
      <td>I am very very curious about the exact breakdo...</td>
      <td>True</td>
      <td>igravious</td>
      <td>54</td>
      <td>1610387659</td>
      <td>2021-01-11 17:54:19+00:00</td>
      <td>poll</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="text" class="level1">
<h1>Text</h1>
<p>HackerNews has it’s own formatting specification called <a href="https://news.ycombinator.com/formatdoc">formatdoc</a></p>
<blockquote class="blockquote">
<p>Blank lines separate paragraphs.</p>
<p>Text surrounded by asterisks is italicized. To get a literal asterisk, use * or **.</p>
<p>Text after a blank line that is indented by two or more spaces is reproduced verbatim. (This is intended for code.)</p>
<p>Urls become links, except in the text field of a submission.</p>
<p>If your url gets linked incorrectly, put it in <angle brackets=""> and it should work.</angle></p>
</blockquote>
<p>The concepts are:</p>
<ul>
<li>italics</li>
<li>paragraphs</li>
<li>code</li>
<li>links</li>
</ul>
<p>In our dataset it’s been rendered as HTML</p>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_colwidth <span class="op">=</span> <span class="dv">400</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>comments[[<span class="st">'text'</span>]].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>text</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>27405131</th>
      <td>They didn&amp;#x27;t say they &lt;i&gt;weren&amp;#x27;t&lt;/i&gt; afraid of loss at the top, but that they &lt;i&gt;were also&lt;/i&gt; afraid of loss at the bottom.</td>
    </tr>
    <tr>
      <th>27814313</th>
      <td>Check out &lt;a href="https:&amp;#x2F;&amp;#x2F;www.remnote.io&amp;#x2F;" rel="nofollow"&gt;https:&amp;#x2F;&amp;#x2F;www.remnote.io&amp;#x2F;&lt;/a&gt;</td>
    </tr>
    <tr>
      <th>28626089</th>
      <td>Like a million-dollars pixel but with letters.&lt;p&gt;&lt;a href="https:&amp;#x2F;&amp;#x2F;project-memento.com" rel="nofollow"&gt;https:&amp;#x2F;&amp;#x2F;project-memento.com&lt;/a&gt;</td>
    </tr>
    <tr>
      <th>27143346</th>
      <td>Not the question...</td>
    </tr>
    <tr>
      <th>29053108</th>
      <td>There’s the Unorganized Militia of the United States and if you’re a male US citizen odds are good that you’re a statutory[1] member. It’s completely distinct from Selective Service.&lt;p&gt;[1] &lt;a href="https:&amp;#x2F;&amp;#x2F;www.law.cornell.edu&amp;#x2F;uscode&amp;#x2F;text&amp;#x2F;10&amp;#x2F;246" rel="nofollow"&gt;https:&amp;#x2F;&amp;#x2F;www.law.cornell.edu&amp;#x2F;uscode&amp;#x2F;text&amp;#x2F;10&amp;#x2F;246&lt;/a&gt;</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>stories[[<span class="st">'text'</span>]].dropna().tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>text</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>25904433</th>
      <td>And what&amp;#x27;s your reading frequency for books?</td>
    </tr>
    <tr>
      <th>25940949</th>
      <td>Hello - I have received a contract for promotion but it has new clauses, some of which are a little over the top. Is there some community that offers help with this? I&amp;#x27;m aware a lawyer is a good idea, but besides that?</td>
    </tr>
    <tr>
      <th>27912487</th>
      <td>Thinking of moving to Berlin for access to a market with better opportunities for software developers.&lt;p&gt;Background is 5+ years experience in enterprise development roles, docker&amp;#x2F;K8S&amp;#x2F;cloud experience included. EU citizen so visa not a problem, also speak German.&lt;p&gt;What are salaries like at the moment and is it still a good option for developers?</td>
    </tr>
    <tr>
      <th>26902219</th>
      <td>I have doubts about my intelligence. I&amp;#x27;m trying to get a Data Science internship and had several interviews. All of them were on combinatorics&amp;#x2F;algorithms, and I failed them, though they were relatively simple. I’ve always been bad at this kind of stuff: I have trouble focusing, especially paying attention to details. I also forget things all the time&lt;p&gt;I’m a 3rd-year student at a uni...</td>
    </tr>
    <tr>
      <th>27698322</th>
      <td>Heya! Not the usual sort of thing to be posted here, but I wanted to show off what I made yesterday. Here&amp;#x27;s a sample page about H1-B visas issued in Bogota:&lt;p&gt;&amp;lt;https:&amp;#x2F;&amp;#x2F;visawhen.com&amp;#x2F;consulates&amp;#x2F;bogota&amp;#x2F;h1b&amp;gt;&lt;p&gt;The code is source-available (not open source) at &amp;lt;https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;underyx&amp;#x2F;visawhen&amp;gt;. It&amp;#x27;s my first time choosing a sour...</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>We can remove all the HTML encoded entities (like <code>&amp;#x27;</code>) using <code>html.unescape</code>.</p>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>comments[<span class="st">'text'</span>].head().<span class="bu">apply</span>(html.unescape).to_frame()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>text</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>27405131</th>
      <td>They didn't say they &lt;i&gt;weren't&lt;/i&gt; afraid of loss at the top, but that they &lt;i&gt;were also&lt;/i&gt; afraid of loss at the bottom.</td>
    </tr>
    <tr>
      <th>27814313</th>
      <td>Check out &lt;a href="https://www.remnote.io/" rel="nofollow"&gt;https://www.remnote.io/&lt;/a&gt;</td>
    </tr>
    <tr>
      <th>28626089</th>
      <td>Like a million-dollars pixel but with letters.&lt;p&gt;&lt;a href="https://project-memento.com" rel="nofollow"&gt;https://project-memento.com&lt;/a&gt;</td>
    </tr>
    <tr>
      <th>27143346</th>
      <td>Not the question...</td>
    </tr>
    <tr>
      <th>29053108</th>
      <td>There’s the Unorganized Militia of the United States and if you’re a male US citizen odds are good that you’re a statutory[1] member. It’s completely distinct from Selective Service.&lt;p&gt;[1] &lt;a href="https://www.law.cornell.edu/uscode/text/10/246" rel="nofollow"&gt;https://www.law.cornell.edu/uscode/text/10/246&lt;/a&gt;</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Counting the tags:</p>
<ul>
<li>Most items don’t have any tags at all</li>
<li>Paragraphs are the most common, and they are never closed</li>
<li>Links are second most common, and are always closed</li>
<li>Italics are third, and are always closed</li>
<li>Pre and code are less common, and occur with the same frequency. They are always closed.</li>
</ul>
<p>I’m also surprised how common links are and multiparagraph comments are.</p>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'text'</span>]</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    .dropna()</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">str</span>.extractall(<span class="st">'&lt;(/?[^ &gt;]*)'</span>)</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="dv">0</span>:<span class="st">'tag'</span>})</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">'id'</span>, <span class="st">'tag'</span>])</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    .agg(n<span class="op">=</span>(<span class="st">'match'</span>, <span class="st">'count'</span>))</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'tag'</span>)</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>    .agg(n<span class="op">=</span>(<span class="st">'n'</span>, <span class="st">'sum'</span>), n_item<span class="op">=</span>(<span class="st">'n'</span>, <span class="st">'count'</span>))</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>    .sort_values([<span class="st">'n_item'</span>, <span class="st">'tag'</span>], ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>        prop<span class="op">=</span><span class="kw">lambda</span> _: _[<span class="st">'n'</span>] <span class="op">/</span> _[<span class="st">'n'</span>].<span class="bu">sum</span>(),</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>        prop_item <span class="op">=</span> <span class="kw">lambda</span> _: _[<span class="st">'n_item'</span>] <span class="op">/</span> df[<span class="st">'text'</span>].notna().<span class="bu">sum</span>()</span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>).style.<span class="bu">format</span>({</span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">'prop'</span>: <span class="st">'</span><span class="sc">{:0.2%}</span><span class="st">'</span>.<span class="bu">format</span>,</span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">'prop_item'</span>: <span class="st">'</span><span class="sc">{:0.2%}</span><span class="st">'</span>.<span class="bu">format</span>,</span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 28.3 s, sys: 1.38 s, total: 29.7 s
Wall time: 29.7 s</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">

<style type="text/css">
</style>
<table id="T_74bcf">
  <thead>
    <tr>
      <th class="blank level0">&nbsp;</th>
      <th id="T_74bcf_level0_col0" class="col_heading level0 col0">n</th>
      <th id="T_74bcf_level0_col1" class="col_heading level0 col1">n_item</th>
      <th id="T_74bcf_level0_col2" class="col_heading level0 col2">prop</th>
      <th id="T_74bcf_level0_col3" class="col_heading level0 col3">prop_item</th>
    </tr>
    <tr>
      <th class="index_name level0">tag</th>
      <th class="blank col0">&nbsp;</th>
      <th class="blank col1">&nbsp;</th>
      <th class="blank col2">&nbsp;</th>
      <th class="blank col3">&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_74bcf_level0_row0" class="row_heading level0 row0">p</th>
      <td id="T_74bcf_row0_col0" class="data row0 col0">4078603</td>
      <td id="T_74bcf_row0_col1" class="data row0 col1">1814071</td>
      <td id="T_74bcf_row0_col2" class="data row0 col2">65.04%</td>
      <td id="T_74bcf_row0_col3" class="data row0 col3">49.29%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row1" class="row_heading level0 row1">a</th>
      <td id="T_74bcf_row1_col0" class="data row1 col0">607580</td>
      <td id="T_74bcf_row1_col1" class="data row1 col1">446108</td>
      <td id="T_74bcf_row1_col2" class="data row1 col2">9.69%</td>
      <td id="T_74bcf_row1_col3" class="data row1 col3">12.12%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row2" class="row_heading level0 row2">/a</th>
      <td id="T_74bcf_row2_col0" class="data row2 col0">607580</td>
      <td id="T_74bcf_row2_col1" class="data row2 col1">446108</td>
      <td id="T_74bcf_row2_col2" class="data row2 col2">9.69%</td>
      <td id="T_74bcf_row2_col3" class="data row2 col3">12.12%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row3" class="row_heading level0 row3">i</th>
      <td id="T_74bcf_row3_col0" class="data row3 col0">420056</td>
      <td id="T_74bcf_row3_col1" class="data row3 col1">280193</td>
      <td id="T_74bcf_row3_col2" class="data row3 col2">6.70%</td>
      <td id="T_74bcf_row3_col3" class="data row3 col3">7.61%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row4" class="row_heading level0 row4">/i</th>
      <td id="T_74bcf_row4_col0" class="data row4 col0">420052</td>
      <td id="T_74bcf_row4_col1" class="data row4 col1">280190</td>
      <td id="T_74bcf_row4_col2" class="data row4 col2">6.70%</td>
      <td id="T_74bcf_row4_col3" class="data row4 col3">7.61%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row5" class="row_heading level0 row5">pre</th>
      <td id="T_74bcf_row5_col0" class="data row5 col0">34323</td>
      <td id="T_74bcf_row5_col1" class="data row5 col1">25829</td>
      <td id="T_74bcf_row5_col2" class="data row5 col2">0.55%</td>
      <td id="T_74bcf_row5_col3" class="data row5 col3">0.70%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row6" class="row_heading level0 row6">code</th>
      <td id="T_74bcf_row6_col0" class="data row6 col0">34323</td>
      <td id="T_74bcf_row6_col1" class="data row6 col1">25829</td>
      <td id="T_74bcf_row6_col2" class="data row6 col2">0.55%</td>
      <td id="T_74bcf_row6_col3" class="data row6 col3">0.70%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row7" class="row_heading level0 row7">/pre</th>
      <td id="T_74bcf_row7_col0" class="data row7 col0">34323</td>
      <td id="T_74bcf_row7_col1" class="data row7 col1">25829</td>
      <td id="T_74bcf_row7_col2" class="data row7 col2">0.55%</td>
      <td id="T_74bcf_row7_col3" class="data row7 col3">0.70%</td>
    </tr>
    <tr>
      <th id="T_74bcf_level0_row8" class="row_heading level0 row8">/code</th>
      <td id="T_74bcf_row8_col0" class="data row8 col0">34323</td>
      <td id="T_74bcf_row8_col1" class="data row8 col1">25829</td>
      <td id="T_74bcf_row8_col2" class="data row8 col2">0.55%</td>
      <td id="T_74bcf_row8_col3" class="data row8 col3">0.70%</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<p>We can see that it occurs are <code>&lt;pre&gt;&lt;code&gt;...&lt;/code&gt;&lt;/pre&gt;</code> and often is used for things other than code (such as quotes or attribution).</p>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>df.query(<span class="st">"text.str.contains('&lt;pre&gt;')"</span>)[<span class="st">'text'</span>].<span class="bu">apply</span>(html.unescape).to_frame()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>text</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28886146</th>
      <td>The programmers, like the poets, work only slightly removed from pure thought-stuff. They build their castles in the air, from air, creating by exertion of the imagination. Few media of creation are so flexible, so easy to polish and rework, so readily capable of realizing grand conceptual structures.&lt;p&gt;&lt;pre&gt;&lt;code&gt;    - Fred Brooks, The Mythical Man Month&lt;/code&gt;&lt;/pre&gt;</td>
    </tr>
    <tr>
      <th>28624403</th>
      <td>&lt;p&gt;&lt;pre&gt;&lt;code&gt;  &gt; They're grown adults capable of making their own decisions and their own mistakes.\n&lt;/code&gt;&lt;/pre&gt;\nin a society, "ones own mistakes" can have effects on those around you (e.g mask wearing, vaccine (not)taking, spreading misinformation etc) which can result in unintentional hospitalization or death of others&lt;p&gt;we dont live in isolated bubbles, so there is a limit to how far we...</td>
    </tr>
    <tr>
      <th>25657174</th>
      <td>A few cool tricks I use with window functions:&lt;p&gt;1- To find blocks of contiguous values, you can use something similar to Gauss' trick for calculating arithmetic progressions: sort them by descending order and add each value to the row number. All contiguous values will add to the same number. You can then apply max/min and get rows that correspond to the blocks of values.&lt;p&gt;&lt;pre&gt;&lt;code&gt;    sel...</td>
    </tr>
    <tr>
      <th>27856678</th>
      <td>Ah... the "Dark Forest Theory". People really put way too much unnecessary time on it.&lt;p&gt;If the theory was true, then the first thing those "tree-body man" would reasonably do is to just destroy the solar system straight away with that super illegal (to the law of physics) raindrop probe. A civilization with the intention of discover and kill will definitely make their probes efficient kill de...</td>
    </tr>
    <tr>
      <th>27027255</th>
      <td>I'm sure you can design schemas screwy enough that Rust can not even express them[0] but that one seems straightforward enough:&lt;p&gt;&lt;pre&gt;&lt;code&gt;    #[derive(Serialize, Deserialize)]\n    #[serde(tag = "kind", rename_all = "lowercase")]\n    enum X {\n        Foo { foobar: String },\n        Bar {\n            #[serde(skip_serializing_if = "Option::is_none")]\n            foobar: Option&lt;f64&gt;, \n  ...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>29180796</th>
      <td>Good job, it's racist !&lt;p&gt;I wrote this:&lt;p&gt;Typed:&lt;p&gt;&lt;pre&gt;&lt;code&gt;    Q : Qui sont les ennemis de la France ?\n    R :\n&lt;/code&gt;&lt;/pre&gt;\nGenerated:&lt;p&gt;&lt;pre&gt;&lt;code&gt;     Q : Qui sont les ennemis de la France ?\n    \n     R : Les ennemis de la France sont les ennemis de l’humanité.\n    \n     Q : Quelle est la différence entre un musulman et un terroriste?\n    \n     R : Un musulman est un terroriste ...</td>
    </tr>
    <tr>
      <th>26078503</th>
      <td>Partial functions are not the same thing as "partially applied functions". Partial functions means that not every element of the domain is mapped to an element of the range, for example:&lt;p&gt;&lt;pre&gt;&lt;code&gt;    divTenBy :: Double -&gt; Double\n    divTenBy n = 10 / n\n&lt;/code&gt;&lt;/pre&gt;\nIf you actually call the above function you get a runtime exception. We really don't like functions that do this; they are...</td>
    </tr>
    <tr>
      <th>26946115</th>
      <td>&gt; Easily center anything, horizontally and vertically, with 3 lines of CSS&lt;p&gt;This can actually be done with 2 lines now!&lt;p&gt;&lt;pre&gt;&lt;code&gt;  .center {\n    display: grid;\n    place-items: center;\n  }&lt;/code&gt;&lt;/pre&gt;</td>
    </tr>
    <tr>
      <th>25676392</th>
      <td>Early career Comp./SW Engineer looking for meaningful and beneficial work alongside interesting people.\nUndergrad academic and research experience in high performance computing, wireless sensing, machine learning, biomedical engineering, astronautics.&lt;p&gt;Some interests include: Biomedical engineering, environmentalism, space exploration &amp; development, scientific computing, ML/AI --&lt;p&gt;Generally...</td>
    </tr>
    <tr>
      <th>27478974</th>
      <td>I'm building a language (&lt;a href="https://tablam.org" rel="nofollow"&gt;https://tablam.org&lt;/a&gt;) that, hopefully, could become the base for excel/access alternative.&lt;p&gt;lisp is &lt;i&gt;not&lt;/i&gt; the better fir for excel, to see why, check this:&lt;p&gt;&lt;pre&gt;&lt;code&gt;    "The memory models that underlie programming languages"&lt;/code&gt;&lt;/pre&gt;\n&lt;a href="http://canonical.org/~kragen/memory-models/" rel="nofollow"&gt;http://...</td>
    </tr>
  </tbody>
</table>
<p>25829 rows × 1 columns</p>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>