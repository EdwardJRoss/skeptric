<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-07-23">

<title>skeptric - What’s in Open Library Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">skeptric</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/EdwardJRoss"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What’s in Open Library Data</h1>
  <div class="quarto-categories">
    <div class="quarto-category">hnbooks</div>
    <div class="quarto-category">nlp</div>
    <div class="quarto-category">ner</div>
    <div class="quarto-category">python</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 23, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>I’m working on a project to <a href="../book-title-ner-outline">extract books from Hacker News</a>, and want to link the books to records from <a href="../open-library">Open Library</a>. I’ve already looked at the process of <a href="../adding-open-library">adding a book to Open Library</a> and <a href="../openlibrary-sqlite">loading a data export into sqlite</a>. Now I really want to look through the data and see what’s inside.</p>
<p>I do this through two different perspectives; summarising the metadata and looking at some specific records.</p>
<section id="summarising-the-metadata" class="level1">
<h1>Summarising the Metadata</h1>
<p>Looking through a random 1% sample of the works, and the related authors and editions, I analysed the fields that occur more than 1% of the time in the metadata. I used a sample so the whole thing would fit into memory and make analysis faster. You can see the details in the <a href="https://github.com/EdwardJRoss/bookfinder/blob/master/notebooks/0032-openlibrary-eda.ipynb">Jupyter Notebook</a>.</p>
<p>It seems like there are a few different processes for adding entities to Open Library. As well as the public adding and editing fields there seem to be some bulk imports from other book databases, and potentially some other programmatic edits. In fact around 70% of the editions were imported from an external source, leaving 30% that may have been manually uploaded. This just reports high level statistics, but it would be interesting to understand the field usage by source.</p>
<section id="editions" class="level2">
<h2 class="anchored" data-anchor-id="editions">Editions</h2>
<ul>
<li>70% of the editions have been automatically imported from one of MARC, Better World Books, Internet Archive, or Amazon (listed in <code>source_records</code>).</li>
<li>64% of editions have at least one ISBN 10 or ISBN 13 (this is asked for in manual uploads, or an LCCN)</li>
<li>Almost always have a <code>title</code>, and sometimes a <code>subtitle</code> (41%) a <code>full_title</code> (19%; often the concatenation of the <code>title</code> and <code>subtitle</code>), an <code>edition_name</code> (14%), and occasionally <code>other_titles</code> (8%).</li>
<li>Generally have <code>authors</code> (89%), and sometimes a <code>by_statement</code> (43%) which is how the authors are listed as text in the book</li>
<li>Editions often contain a <code>publisher</code> (96%), <code>publish_date</code> (98%) and 58% of the time locations in <code>publish_places</code> and <code>publish_country</code> (the latter of which is often a US state and not in the Open Library user interface)</li>
<li>60% of the time <code>subjects</code> are available; other details about what the book is about are available less than 10% of the time, such as <code>subject_places</code>, <code>subject_people</code>, <code>subject_time</code>, and <code>genres</code></li>
<li>48% have <code>lc_classifications</code> and 18% a <code>dewey_decimal_class</code> which help identify the topic</li>
<li>It can be connected to other databases using things like <code>lccn</code>, <code>oclc_numbers</code>, <code>identifiers</code>, <code>ocaid</code>.</li>
<li>Sometimes more information is in <code>notes</code>, a <code>table_of_contents</code>, <code>description</code>, or a <code>first_sentence</code></li>
<li>There are sometimes a <code>cover</code> (33%) image hosted on Open Library</li>
</ul>
</section>
<section id="works" class="level2">
<h2 class="anchored" data-anchor-id="works">Works</h2>
<p>A work can contain multiple editions. In the Open Libary user interface it’s not very clear how you edit a work, but some changes on editions automatically changed the work (such as adding a cover0.</p>
<ul>
<li>Works largely have a subset of the fields of editions, not always consistent with the editions</li>
<li>The authors are normally a superset of the authors of the editions, typically there’s only one author (89% of the time), and 5% of the time no author.</li>
<li>On average there’s 1.3 editions per work</li>
</ul>
</section>
<section id="authors" class="level2">
<h2 class="anchored" data-anchor-id="authors">Authors</h2>
<p>Authors are a bit</p>
<ul>
<li>On average there’s 1.1 works per author</li>
<li>Most authors have a <code>name</code>, 62% a <code>personal_name</code>, and 4% <code>alternate_names</code>. They’re often inconsistent with format (e.g.&nbsp;<code>Surname, Firstname</code> or <code>Firstname Surname</code>)</li>
<li>22% have a <code>birth_date</code> and 4% <code>death_date</code> (free text) which could be useful for disambiguation</li>
<li>7% have <code>remote_ids</code> linking to wikidata, VIAF and ISNI where additional information can be obtained</li>
<li>Less than 2% have a <code>bio</code> for the author or <code>photos</code> of them</li>
</ul>
</section>
</section>
<section id="looking-at-some-specific-examples" class="level1">
<h1>Looking at some specific examples</h1>
<p>As a complement to the high level statistics it’s useful to look at some specific example texts. I picked some technical books I’m aware of and <a href="https://github.com/EdwardJRoss/bookfinder/blob/master/notebooks/0031-openlibrary-sql-examples.ipynb">looked through their records in a notebook</a>.</p>
<section id="duplicate-works" class="level2">
<h2 class="anchored" data-anchor-id="duplicate-works">Duplicate works</h2>
<p>Searching for books with the title “Bayesian Data Analysis” (in a case insensitive way) returned 4 separate works, all clearly the same book. Note that one book has the author name in the wrong order (<code>Gelman Andrew</code>), and that only <code>/works/OL18391964W</code> contains all the authors (including Andrew Gelman twice, the second time as <code>A. Gelman</code>).</p>
<table class="table">
<colgroup>
<col style="width: 24%">
<col style="width: 29%">
<col style="width: 20%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>work_key</th>
<th>works_title</th>
<th>author_name</th>
<th>author_key</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>/works/OL25152967W</td>
<td>Bayesian Data Analysis</td>
<td>Gelman Andrew</td>
<td>/authors/OL9492748A</td>
</tr>
<tr class="even">
<td>/works/OL12630389W</td>
<td>Bayesian data analysis</td>
<td>Andrew Gelman</td>
<td>/authors/OL2668098A</td>
</tr>
<tr class="odd">
<td>/works/OL19124056W</td>
<td>Bayesian data analysis</td>
<td>Andrew Gelman</td>
<td>/authors/OL2668098A</td>
</tr>
<tr class="even">
<td>/works/OL18391964W</td>
<td>Bayesian data analysis</td>
<td>Andrew Gelman</td>
<td>/authors/OL2668098A</td>
</tr>
<tr class="odd">
<td>/works/OL18391964W</td>
<td>Bayesian data analysis</td>
<td>John B. Carlin</td>
<td>/authors/OL2692132A</td>
</tr>
<tr class="even">
<td>/works/OL18391964W</td>
<td>Bayesian data analysis</td>
<td>Hal S. Stern</td>
<td>/authors/OL2692133A</td>
</tr>
<tr class="odd">
<td>/works/OL18391964W</td>
<td>Bayesian data analysis</td>
<td>Donald B. Rubin</td>
<td>/authors/OL1194305A</td>
</tr>
<tr class="even">
<td>/works/OL18391964W</td>
<td>Bayesian data analysis</td>
<td>A. Gelman</td>
<td>/authors/OL2692134A</td>
</tr>
</tbody>
</table>
</section>
<section id="duplicate-editions" class="level2">
<h2 class="anchored" data-anchor-id="duplicate-editions">Duplicate editions</h2>
<p>Sometimes an edition is duplicated, such as <a href="https://openlibrary.org/books/OL18335079M/How_to_solve_it">How to solve it</a> and <a href="https://openlibrary.org/books/OL4468213M/How_to_solve_it">How to solve it</a> which both have the same pair of ISBN 10 <code>[0691080976, 0691023565]</code></p>
</section>
<section id="multiple-works-for-an-edition" class="level2">
<h2 class="anchored" data-anchor-id="multiple-works-for-an-edition">Multiple works for an edition</h2>
<p>Sometimes an edition has multiple works, but all the cases I’ve checked seem to be errors.</p>
</section>
</section>
<section id="summary-of-open-libarary" class="level1">
<h1>Summary of Open Libarary</h1>
<p>Open Library has massive coverage of books, often with other useful information about the books, but with some duplication and inconsistencies (e.g.&nbsp;among publishers). It’s a good starting point for a knowledge base, but requires additional work to remove duplicates and other errors. A lot of these are driven by the interface; an interesting extension would be to look more into how the field usage varies by source, and what the sources of duplication are. These could potentially be improved by the Open Library team to create better results in the future. But it’s still useful enough to work with as is, if we’re careful.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>