<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-10-26">

<title>skeptric - Learning Hugo by Editing Themes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">skeptric</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/EdwardJRoss"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Learning Hugo by Editing Themes</h1>
  <div class="quarto-categories">
    <div class="quarto-category">programming</div>
    <div class="quarto-category">blog</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 26, 2020</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>One of the hardest parts of learning something new is motivation. This is why one of the best ways to <a href="../teaching-programming-by-editing">learn programming is editing code</a>; it’s goal driven so motivation is built in. I’ve successfully used this to start learning how to write Hugo themes.</p>
<p>Now that I’ve got a reasonable collection of posts, over 250, I would like to understand what content people are actually accessing on this website to get an idea of what would be useful. Because I’m lazy the easiest way to do this is with Google Analytics. Unfortunately the theme I’m using doesn’t support Google Analytics, and I can’t inject it into an existing partial like I did to <a href="../diagrams-in-hugo">include diagrams in Hugo pages</a>.</p>
<p>So I ended up forking the <a href="https://github.com/jonathanjanssens/hugo-casper3">Hugo Casper 3</a> theme to create my own version where I could inject these tags. I wanted to inject an appropriate partial hook so that I could put in the Google Analytics script; the existing <code>site-header.html</code> that I used to inject Mathjax and Mermaid.js isn’t included on the list page. There’s an HTML template in <code>layouts/_default/baseof.html</code> that seems to contain the HTML template used to create every page, which would be appropriate. This was as simple as adding the partial at the end of the head:</p>
<pre><code>&lt;head&gt;
    ...
    {{- partial "header-scripts.html" $ -}}
&lt;/head&gt;</code></pre>
<p>Then I added a dummy <code>layouts/partials/header-scripts.html</code> in the theme:</p>
<pre><code>&lt;!--Configure scripts for headers here--&gt;</code></pre>
<p>Then in my website, which has the theme as a submodule, I overwrite <code>layouts/partials/header-scripts.html</code> with my Google Analytics tags (and also migrate my Mathjax and Mermaid code over to it). Once I update the submodule in git it all works.</p>
<section id="why-not-write-your-own-theme" class="level2">
<h2 class="anchored" data-anchor-id="why-not-write-your-own-theme">Why not write your own theme?</h2>
<p>The best thing about editing the theme is it opens the door to a lot of customisation. It’s easier than writing from scratch, and allows more flexibility than any theme.</p>
<p>I could write a theme from scratch, but that’s a lot of work. Not only would I have to understand HTML and CSS (and design) well enough to make a good website, I would need to understand Hugo well enough to do it. I don’t have the motivation to learn this whole framework from scratch; it’s surprisingly complex for something that seems simple.</p>
</section>
<section id="why-not-use-an-existing-theme" class="level2">
<h2 class="anchored" data-anchor-id="why-not-use-an-existing-theme">Why not use an existing theme?</h2>
<p>One of the appeals of Hugo is the vast array of <a href="https://themes.gohugo.io/">themes</a> you can just drop in. But unfortunately there’s no consistency built into features in Hugo. It was difficult when I <a href="../casper-2-to-3">ported from Casper 2 to Casper 3</a> because the parameters were slightly different (and in fact I just realised today my social links had been broken since the upgrade 3 months ago). For example Casper 2 uses <code>image</code> for a post image, others use <code>feature_image</code> (and others don’t support it), Casper 2 used <code>githubName</code> to link to a github repository Casper 3 uses <code>github</code> and requires the full URL.</p>
<p>Moreover I couldn’t find a single theme that did everything I wanted. The closest was <a href="https://themes.gohugo.io/academic/">academic</a>, but it was slow to render and required a lot of configuration which has its own steep learning curve.</p>
</section>
<section id="editing-themes" class="level2">
<h2 class="anchored" data-anchor-id="editing-themes">Editing Themes</h2>
<p>The wonderful thing about open source code is you can build on it. Now I’ve opened the door to editing a theme the Hugo themes turns from a menu to a buffet. I can take elements from other themes and integrate them into the theme I’m working on.</p>
<p>I can now start to look into making improvements to this blog, and slowly learning features of Hugo to solve real problems. I’ve already sped up page loads by moving Mermaid.js to the end of the body instead of in the head. There’s more potential improvements by only loading the script on pages that use it (or pre-building the images), optimising image sizes, paginating the index page and so on.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>